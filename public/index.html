<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Socket.IO Chat Example</title>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./stylesheets/welcome.css">
</head>
<body>

<div class = "container">
  <div class="wrapper">
    <form action="" method="post" name="Login_Form" class="form-signin">
      <h3 class="form-signin-heading">Welcome Back</h3>
      <hr class="colorgraph"><br>

      <input type="text" id="username"class="form-control" name="Username" placeholder="User name" required="" autofocus="" />
      <input type="text" id="room" class="form-control" name="Password" placeholder="Room name" required=""/>
      <br>
      <button class="btn btn-lg btn-primary btn-block"  name="Submit" value="Login" type="Submit">Join</button>
    </form>
  </div>
</div>



<script src="/socket.io/socket.io.js"></script>
<script>
    $(function () {
        var room, username;
        var socket = io();

        //submit username and room----------------------------------------------------------
        $('form').submit(function(){
            room =  $('#room').val();
            username = $('#username').val();
            socket.emit('joinroom', {room: room, username: username});
            $('#room').val('');
            $('#username').val('');
            return false;
        });

        //update a joined user-----------------------------------------------------------
        socket.on('userjoin', function (obj) {
            console.log(obj);
        });

        //get coordinates on cursor update ----------------------------------------------------------------
        document.onmousemove = function(e){
            var x = e.pageX;
            var y = e.pageY;
            //console.log(x +" " +y);
            socket.emit('onclick', {X: x,
                                    Y: y,
                                    username: username,
                                    room: room})
        };

        //notify others in the room ------------------------------------------------------
        socket.on('update-position', function (update) {
            console.log(update);
        })
    });
</script>
</body>
</html>